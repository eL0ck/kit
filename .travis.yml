language: python
branches:
  only:
    - master
    - dev
python:
  - '2.7'
  - '3.4'
  - '3.5'
  - '3.6'
install:
  - pip install flake8
  - pip install pytest
script:
  - flake8 --ignore=E501
  - pytest
  - head template.yaml
  - echo -e "Hello friend ..."
before_deploy:
  - ci/build_deploy.sh
deploy:
  provider: pypi
  skip_cleanup: true
  server: $PYPI_URL
  on:
    branch: dev
    python: 2.7
  distributions: "sdist bdist_wheel"
  user: tpj800
  password: $PYPI_PASSWORD
